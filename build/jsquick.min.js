const buildTag=(e,t,r)=>{null==t&&null==r&&(t=e[1],r=e[2],e=e[0]);const n=document.createElement(e);for(var l of Object.keys(t))l.startsWith("on")?n.setAttribute(l,`(${t[l]})()`):n.setAttribute(l,t[l]);if("string"==typeof r)n.appendChild(document.createTextNode(r));else for(var s of Object.keys(r))n.appendChild(buildTag(r[s][0],{id:s,...r[s][1]},r[s][2]));return n};class JSQC{constructor(){return null}static register(n){if(!(n.prototype instanceof JSQComponent))throw"You can only register a class that extends JSQComponent";var l=n.prototype.constructor.name,e=$(l).size;for(let t=0;t<e;++t){const o=new n;let e=JSQfindTag(l),r={children:e.childNodes,idl:{},idg:e=>{var t="JSQC_"+JSQuuid();return r.idl[e]=t},_index:t};for(var s of Array.from(e.attributes))r[s.name]=s.value;var a=o.render(r).elem;o.JSQbind(a,r),e.parentNode.replaceChild(a,e)}}}class JSQComponent{constructor(e){let r=e||{};this.state={},this.JSQattributes=null,this.JSQtag=null;for(let t of Object.keys(r))Object.defineProperty(this.state,t,{get:()=>r[t],set:e=>{console.log(e),r[t]=e,this.reload()}})}JSQbind(e,t){this.JSQtag=e,this.JSQattributes=t}reload(){JSQCreplaceDifferences(this.JSQtag,this.render(this.JSQattributes).elem)}render(e){return $.create("div")}}const JSQCreplaceDifferences=(t,r)=>{if(t.attributes&&r.attributes){t.attributes.length!=r.attributes.length&&JSQcopyAttributes(r,t);for(let e=0;e<r.attributes.length;++e)t.attributes[e].name==r.attributes[e].name&&t.attributes[e].value==r.attributes[e].value||JSQcopyAttributes(r,t)}for(let e=0;e<r.childNodes.length;++e){if(null==(t.childNodes[e]||null)){t.innerHTML=r.innerHTML;break}JSQCreplaceDifferences(t.childNodes[e],r.childNodes[e])}t.innerHTML!=r.innerHTML&&(t.innerHTML=r.innerHTML)},loadJS=(e,t)=>{const r=document.createElement("script");r.src=e,r.onload=t,document.body.appendChild(r)},loadCSS=(e,t)=>{const r=document.createElement("link");r.rel="stylesheet",r.href=e,r.onload=t,document.head.appendChild(r)};class JSQQueryElement{constructor(e){this.elem=e}on(e,t){return this.elem.addEventListener(e,t),this}css(e,t){return this.elem.style.setProperty(e,t),this}attr(e,t){if("string"==typeof e)this.elem.setAttribute(e,t);else for(var r of Object.keys(e))this.elem.setAttribute(r,e[r]);return this}add(e){for(var t of e=e instanceof JSQQueryElement?[e]:e)t=t.elem||t,this.elem.appendChild(t);return this}click(){return this.elem.click(),this}text(e){return this.elem.innerText=e,this}html(e){return this.elem.innerHTML=e,this}addClass(e){return this.elem.classList.add(e),this}remClass(e){return this.elem.classList.remove(e),this}id(e){return this.elem.id=e,this}focus(){return this.elem.focus(),this}value(e){return null==e?this.elem.value:(this.elem.value=e,this)}copy(){return new JSQQueryElement($.clone(this.elem,this.elem.tagName))}}class JSQ extends Function{constructor(){super("...args","return $.call(...args)"),this.body=new JSQQueryElement(document.querySelector("body"))}call(t){t=document.querySelectorAll(t);if(0==t.length)return null;if(1==t.length)return new JSQQueryElement(t[0]);{let e=[];for(var r of t)e.push(new JSQQueryElement(r));return new JSQQueryElementList(e)}}download(e,t,r){let n="";"text"==(r=r||"file")?n="data:text/plain;charset=utf-8,"+encodeURIComponent(t):"file"==r&&(n=t),$.create("a").attr("href",n).attr("download",e).click()}create(e,t){return new JSQQueryElement(document.createElement(e,t))}request(n,l,s,a){return new Promise((e,t)=>{let r={method:l,...a};null!=s&&0!=Object.keys(s).length&&(r.body=s),fetch(n,r).then(e).catch(t)})}get(e,t){return this.request(e,"GET",{},t)}post(e,t,r){return this.request(e,"POST",t,r)}put(e,t,r){return this.request(e,"PUT",t,r)}delete(e,t,r){return this.request(e,"DELETE",t,r)}patch(e,t,r){return this.request(e,"PATCH",t,r)}clone(e,t){let r=$.create(t).html(e.innerHTML);if(e.attributes)for(var n of Array.from(e.attributes))r.attr(n.name,n.value);return r.elem}}const $=new JSQ;class JSQQueryElementList{constructor(e){this.elements=e}get size(){return this.elements.length}}Object.getOwnPropertyNames(JSQQueryElement.prototype).forEach(e=>{let r=JSQQueryElement.prototype[e];"function"==typeof r&&Object.defineProperty(JSQQueryElementList.prototype,r.name,{configurable:!0,writable:!0,value:function(...e){for(var t of this.elements)r.call(t,...e)}})});const JSQAttrsMap={},bindState=(e,t,r,n)=>{r=r||(()=>{}),n=n||(e=>e);let l="JSQ_"+JSQuuid();t=n(t);var s=`<span class=${l}>${t}</span>`;JSQreplaceInDoc(`{{${e}}}`,s);let a=t;return[()=>a,e=>{e=n(e);JSQsetClassContent(l,e),a=e,r(e)}]},bindAttr=(n,e,t,l,s)=>{l=l||(()=>{}),s=s||(e=>e);let a="JSQ_"+JSQuuid(),o="q_"+n;var r,c=document.querySelectorAll("["+o+"]");let i="{{"+e+"}}";t=s(t);for(r of c){let e=r.attributes.getNamedItem(o);e.value.includes(i)&&(r.classList.add(a),r.setAttribute(n,JSQReplaceAllAttrs(e,o,i,r,t)))}let u=t,d=[()=>u,e=>{var t,r=s(e);for(t of document.getElementsByClassName(a))t.setAttribute(n,JSQReplaceAllAttrs(t.attributes.getNamedItem(o),o,i,t,r));u=r,l(r)}];return JSQAttrsMap[e]=e=>e.replace(i,d[0]()),d},JSQReplaceAllAttrs=(e,t,r,n,l)=>{let s=e.value.replaceAll(r,l);const a=n.attributes.getNamedItem(t).value.matchAll(/\{\{\w+\}\}/g);let o=a.next();for(;null!=o.value;){let e=JSQAttrsMap[o.value[0].substr(2,o.value[0].length-4)];e&&(s=e(s)),o=a.next()}return s};function JSQuuid(){var r=(new Date).getTime(),n="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random();return 0<r?(t=(r+t)%16|0,r=Math.floor(r/16)):(t=(n+t)%16|0,n=Math.floor(n/16)),("x"===e?t:3&t|8).toString(16)})}const JSQreplaceInDoc=(e,t)=>{JSQreplaceInTag(e,t,document.body)},JSQreplaceInTag=(e,t,r)=>{for(var n of r.childNodes)JSQreplaceInTag(e,t,n);var l;r.nodeType==Node.TEXT_NODE&&""!=r.textContent.replace(/\s|\n/g,"")&&(l=$.create("jsq").html(r.textContent.replaceAll(e,t)).elem,r.parentNode.insertBefore(l,r),r.parentNode.removeChild(r))},JSQsetClassContent=(e,t)=>{for(var r of document.getElementsByClassName(e))r.innerHTML=t},JSQsetClassAttrContent=(e,t,r)=>{for(var n of document.getElementsByClassName(e))n.setAttribute(t,r)},JSQcopyAttributes=(e,t)=>{for(;0<t.attributes.length;)t.removeAttribute(t.attributes[0].name);for(var r of Array.from(e.attributes))t.setAttribute(r.name,r.value)},JSQfindTag=(e,t)=>{if(null==e)return null;for(var r of(t=t||$.body.elem).childNodes){r=JSQfindTag(e,r);if(r)return r}return t.tagName==e.toUpperCase()?t:void 0};
//# sourceMappingURL=jsquick.min.map